# React 中后台系统：基本需求

## 常见组件封装
### 异步按钮
对于触发异步操作的按钮，需要有 Loading 状态。

::: details 例子：业务自行维护 Loading 状态
<<< @/../labs/react/async-button/src/Old.js
:::

AsyncButton 组件实现思路：
- 如果 onClick 事件是异步的 (返回 Promise)，就需要 Loading 状态
- 除了要处理 resolve 还别忘了处理 reject

::: details 例子：封装 AsyncButton 组件
<<< @/../labs/react/async-button/src/AsyncButton.js
:::

::: details 例子：在列表页中使用 AsyncButton
<<< @/../labs/react/async-button/src/ListDemo.js
:::

### 常见布局
## 登录、授权
### 前端判断是否已登录
::: details 使用 Redux 存储登录信息
<<< @/../labs/redux/login-demo/src/store.js
<<< @/../labs/redux/login-demo/src/App.js
:::

### 记住密码、7天免登陆
## 表单
### 表单的初始数据
### 表单前端校验
### 表单后端校验
### 动态表单
### 分步表单
### 自定义表单控件
## 列表页、表格页
### 分页
### 无限滚动、瀑布流
### 搜索、筛选
### 加载状态
### 排序
## 路由
除非特别说明，技术栈一律采用 react-router。

### 路由配置对象
中后台系统有很多路由，而且需求经常变，路由写死在组件里面不太好。希望能将路由配置在 JS 对象里面，然后根据这个配置自动生成路由。

::: details 例子：路由写死在组件里面
todo
:::

::: details 例子：路由配置对象
todo
:::

### 路由参数

### 嵌套路由
路由会共用一些布局 UI，所以需要支持嵌套路由。todo: 太难描述了，要给个图。

如果路由是写死在组件内的话，事情变得很容易。但我们之前有需求是将路由配置在 JS 对象里，这样事情就变得困难很多。

::: details 例子：如果路由是写死在组件内
todo
:::

::: details 例子：如何支持配置嵌套路由
todo
:::

### 路由权限控制
由于路由配置是 JS 对象，所以可在运行的时候动态生成，自然能实现各种灵活的需求。

【方案一】对于没权限的路由就直接删掉，实现简单。缺点是无法区分 403 和 404，前者是无访问权限，后者是 URL 路径错误。

【方案二】在路由跳转前进行“拦截”，如果没有权限则执行相应业务逻辑 (跳到 403 页面、跳到登录页)。

### 基于路由生成菜单导航
以 react-router 为例，路由是扁平结构，而菜单是树形结构，所以需要转换。

需求是实现路由配置转成菜单配置，关键难点：
- 扁平结构转树形结构，基于公共前缀实现 (考验算法功底了)
- 结合路由权限控制，对于无权限路由不应该转成菜单
- 有些路由需要转成菜单，有些不需要

## 集成第三方库
### ECharts
### D3.js

## 前后端通信
### 报错信息统一处理
